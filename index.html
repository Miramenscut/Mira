<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>MIRA Men's Cut | Barbiere Bari - Barber Shop & Taglio Uomo</title>
    <meta name="description" content="MIRA Men's Cut è il tuo barbiere di riferimento a Bari, in Via Giulio Petroni 12 (zona Stazione/Carrassi). Taglio uomo, rasatura tradizionale e cura della barba in un ambiente esclusivo.">
    <meta name="keywords" content="MIRA Bari, Mira Men's Cut, Barbiere Bari, Barber Shop Bari, Parrucchiere Uomo Bari, Taglio Uomo Bari, Rasatura Barba Bari, Via Giulio Petroni Barbiere">
    <meta name="author" content="MIRA Men's Cut">
    <meta name="robots" content="index, follow">
    
    <meta property="og:site_name" content="MIRA Men's Cut Bari">
    <meta property="og:title" content="MIRA Men's Cut | Barbiere Bari">
    <meta property="og:description" content="Definire lo stile, un taglio alla volta. Il tuo barber shop di fiducia nel centro di Bari.">
    <meta property="og:image" content="https://miramenscut.it/img-salone.jpg">
    <meta property="og:url" content="https://miramenscut.it">
    <meta property="og:type" content="business.business">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HairSalon",
      "name": "MIRA Men's Cut",
      "image": "https://miramenscut.it/img-salone.jpg",
      "@id": "https://miramenscut.it",
      "url": "https://miramenscut.it",
      "telephone": "+393762061609",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Via Giulio Petroni 12",
        "addressLocality": "Bari",
        "postalCode": "70124",
        "addressCountry": "IT"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 41.118, 
        "longitude": 16.869
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        ],
        "opens": "09:00",
        "closes": "20:00"
      },
      "sameAs": [
        "https://www.instagram.com/miramenscut/"
      ],
      "priceRange": "$$"
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- VARIABILI E BASE --- */
        :root {
            --bg-color: #0a0a0a;
            --text-color: #ffffff;
            --gray-text: #999999;
            --border-color: #222222;
        }

        html { scroll-behavior: smooth; }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            line-height: 1.4;
        }

        body.preloader-active { overflow: hidden; }

        a { text-decoration: none; color: white; transition: 0.3s; }
        ul { list-style: none; }

        .white-logo { filter: invert(1) brightness(100%); }

        /* --- PRELOADER --- */
        #preloader {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        #preloader.hide-preloader {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .preloader-logo {
            width: 80px;
            height: auto;
            margin-bottom: 30px;
            filter: invert(1);
            animation: pulseLogo 2s infinite ease-in-out;
        }

        .loading-bar-container {
            width: 200px;
            height: 4px;
            background-color: #222;
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loading-bar-fill {
            height: 100%;
            width: 50%;
            background-color: #fff;
            position: absolute;
            border-radius: 2px;
            animation: loadingAnimation 1.5s infinite ease-in-out;
        }

        @keyframes loadingAnimation {
            0% { left: -50%; }
            100% { left: 100%; }
        }
        
        @keyframes pulseLogo {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        /* --- HEADER --- */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 40px; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.95), transparent);
        }

        .header-left { display: flex; align-items: center; gap: 20px; }
        .header-logo { height: 28px; width: auto; display: block; }

        /* LANGUAGE SWITCHER */
        .lang-switch {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .lang-btn {
            font-size: 0.75rem;
            color: #888;
            cursor: pointer;
            font-weight: 500;
            transition: 0.3s;
            letter-spacing: 1px;
        }

        .lang-btn:hover { color: #fff; }
        .lang-btn.active { color: #fff; font-weight: 700; border-bottom: 1px solid #fff; }

        .header-right { display: flex; align-items: center; gap: 20px; }

        .btn-prenota {
            background: rgba(255,255,255,0.1);
            border: 1px solid #fff;
            color: #fff;
            padding: 10px 24px;
            text-transform: uppercase;
            font-size: 0.75rem; 
            letter-spacing: 2px;
            font-weight: 500;
            border-radius: 2px;
            backdrop-filter: blur(5px);
        }
        .btn-prenota:hover { background-color: #fff; color: #000; }

        /* --- HERO SECTION --- */
        .hero {
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background-image: url('bg-home.jpg'); 
            background-size: cover;
            background-position: center;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5); 
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 0 20px;
            padding-bottom: 80px; 
        }

        .hero-square-frame {
            width: min(500px, 70vw); 
            aspect-ratio: 1 / 1;
            display: flex;        
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }

        .hero-logo-img { width: 90%; height: auto; }

        .subtitle {
            font-size: 1rem;
            letter-spacing: 8px;
            text-transform: uppercase;
            color: #e0e0e0;
            margin-bottom: 10px; 
            font-weight: 300;
            margin-top: -30px; 
        }

        .hero-address {
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #fff;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding-bottom: 2px;
            margin-bottom: 0;
            font-weight: 400;
            cursor: pointer;
        }
        .hero-address:hover { color: #ccc; border-color: #ccc; }

        .scroll-down {
            position: absolute;
            bottom: 5px; 
            opacity: 0.7;
            animation: bounce 2s infinite;
            cursor: pointer;
            padding: 20px;
            z-index: 3;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* --- LISTINO SERVIZI --- */
        .pricing {
            padding: 80px 20px;
            background-color: #0a0a0a;
            display: flex;
            justify-content: center;
        }

        .pricing-container {
            width: 100%;
            max-width: 800px;
        }

        .section-title {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 50px;
            letter-spacing: 2px;
            color: #fff;
        }

        .service-item {
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: 0.3s;
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px 10px;
            color: #bbb;
            transition: 0.3s;
        }

        @media (hover: hover) {
            .service-item:hover .service-header {
                color: #fff;
                padding-left: 20px; 
                background-color: #111;
            }
        }

        .service-name {
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 400;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .toggle-icon {
            font-size: 0.7rem;
            opacity: 0.5;
            transition: transform 0.3s;
            min-width: 15px;
        }

        .service-desc {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.4s ease;
            opacity: 0;
            padding: 0 10px 0 25px;
            color: #d1d1d1;
            font-size: 0.9rem;
            line-height: 1.6;
            font-style: normal;
            font-weight: 300;
            border-left: 1px solid #333;
            margin-left: 18px;
        }

        .service-item.active .service-desc {
            max-height: 200px; 
            opacity: 1;
            margin-bottom: 25px;
            padding-top: 10px;
        }
        
        .service-item.active .toggle-icon {
            transform: rotate(90deg);
            color: #fff;
            opacity: 1;
        }

        .service-item.active .service-header { color: #fff; font-weight: 500; }

        /* --- VISUAL GRID --- */
        .visual-section { padding: 0; background-color: #0a0a0a; }
        
        .grid-container {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            height: 100vh; 
            min-height: 800px;
        }

        .grid-item {
            flex: 0 0 50%; 
            width: 50%;
            height: 50%; 
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid #1a1a1a;
            cursor: pointer;
        }

        .grid-item:nth-child(odd) { border-right: 1px solid #1a1a1a; }
        .grid-item:nth-child(even) { border-right: none; }

        .grid-bg {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            transition: transform 0.8s ease;
            filter: grayscale(100%) brightness(0.6); 
        }
        
        @media (hover: hover) {
            .grid-item:hover .grid-bg {
                transform: scale(1.05); 
                filter: grayscale(0%) brightness(0.8); 
            }
        }

        #bg-tagli { background-position: center center; }
        #bg-salone { background-position: center center; transform: scaleX(-1); }
        #bg-map { background-position: center center; }

        .grid-content {
            position: absolute;
            bottom: 40px;
            left: 40px;
            z-index: 2;
            pointer-events: none;
        }

        .grid-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #fff;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .grid-subtitle {
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.7rem;
            color: #ccc;
        }

        /* --- OVERLAY & LIGHTBOX --- */
        .overlay {
            height: 100%;
            width: 100%;
            position: fixed;
            z-index: 2000;
            top: 0;
            left: 0;
            background-color: rgba(0,0,0, 0.98);
            overflow-y: auto;
            transition: 0.4s;
            opacity: 0;
            visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer; 
        }
        .overlay > * { cursor: default; }
        .overlay.open { opacity: 1; visibility: visible; }

        .overlay-close-btn {
            position: fixed;
            top: 25px;
            right: 30px;
            font-size: 40px;
            color: #fff;
            z-index: 2005;
            background: rgba(0,0,0,0.5);
            width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%;
            backdrop-filter: blur(5px);
            cursor: pointer;
        }

        .lightbox {
            position: fixed;
            z-index: 3000;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
            cursor: pointer;
        }
        .lightbox.active { opacity: 1; visibility: visible; }
        .lightbox-img { max-width: 95%; max-height: 90vh; object-fit: contain; user-select: none; cursor: default; }
        
        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            color: white;
            padding: 20px;
            cursor: pointer;
            z-index: 3001;
            user-select: none;
            opacity: 0.7;
        }
        .lightbox-nav:hover { opacity: 1; }
        .prev-btn { left: 10px; }
        .next-btn { right: 10px; }
        .lightbox-close { position: absolute; top: 20px; right: 20px; font-size: 2.5rem; color: white; cursor: pointer; z-index: 3002; }

        /* --- CONTENUTI OVERLAY --- */
        .crew-content-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 40px;
            width: 100%;
            max-width: 1000px;
            padding: 80px 20px 40px 20px;
            margin: auto 0; 
        }
        .crew-card {
            width: 280px;
            background-color: #111;
            border: 1px solid #222;
            border-radius: 8px;
            overflow: hidden;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .img-placeholder { width: 100%; height: 320px; background-color: #1a1a1a; position: relative; }
        .crew-photo { width: 100%; height: 100%; object-fit: cover; }
        .crew-info { padding: 20px; }
        .crew-name { font-family: 'Playfair Display', serif; font-size: 1.6rem; color: #fff; margin-bottom: 5px; }
        .crew-role { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 2px; color: #888; }

        /* Gallery */
        .gallery-container {
            width: 100%; max-width: 1200px; padding: 100px 20px 40px 20px;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px; margin: 0 auto;
        }
        .gallery-item {
            width: 100%; aspect-ratio: 4/3; border-radius: 4px; overflow: hidden;
            background: #111; flex: unset; scroll-snap-align: unset; cursor: pointer;
        }
        .gallery-spacer { display: none; }
        .zoomable { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; cursor: pointer; }
        @media (hover: hover) { .gallery-item:hover .zoomable { transform: scale(1.03); } }

        /* Portfolio */
        .portfolio-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px; width: 100%; max-width: 1200px; padding: 100px 20px 40px 20px;
        }
        .portfolio-item { aspect-ratio: 9/16; background-color: #111; overflow: hidden; border-radius: 8px; position: relative; }
        .portfolio-item .zoomable { cursor: pointer; }
        .portfolio-media { width: 100%; height: 100%; object-fit: cover; }

        /* Map Overlay Styling */
        .map-content-container {
            width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 80px 20px 40px 20px; text-align: center; color: #fff;
        }
        .map-wrapper {
            max-width: 600px; width: 100%; background: rgba(17, 17, 17, 0.8);
            border: 1px solid #333; border-radius: 8px; padding: 40px; backdrop-filter: blur(10px);
        }
        .map-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 20px; color: #fff; }
        .map-desc { font-size: 1rem; line-height: 1.8; color: #ccc; margin-bottom: 40px; font-weight: 300; }
        .map-buttons { display: flex; gap: 15px; justify-content: center; margin-bottom: 40px; flex-wrap: wrap; }
        .map-btn {
            padding: 15px 30px; border: 1px solid #fff; color: #fff; text-transform: uppercase;
            font-size: 0.8rem; letter-spacing: 2px; border-radius: 4px; display: inline-flex;
            align-items: center; gap: 10px; transition: 0.3s;
        }
        .map-btn:hover { background: #fff; color: #000; }
        .parking-box { border-top: 1px solid #333; padding-top: 30px; margin-top: 20px; }
        .parking-title { display: block; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 2px; margin-bottom: 15px; color: #fff; font-weight: 600; }
        .parking-desc { font-size: 0.9rem; color: #999; margin-bottom: 20px; }

        /* --- FOOTER --- */
        footer { background-color: #050505; border-top: 1px solid #111; padding: 60px 20px; color: var(--gray-text); font-size: 0.85rem; }
        .footer-container { display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; max-width: 1200px; margin: 0 auto; gap: 40px; }
        .footer-col { flex: 1; min-width: 280px; }
        .footer-logo { width: 120px; height: auto; margin-bottom: 25px; opacity: 0.9; }
        .footer-address-link { color: inherit; text-decoration: none; display: block; margin-bottom: 25px; line-height: 1.8; cursor: pointer; }
        .footer-address-link:hover { text-decoration: underline; color: #fff; }

        .slogan { font-family: 'Playfair Display', serif; font-style: italic; margin-bottom: 20px; color: #fff; font-size: 1.1rem; }
        .copyright { font-size: 0.7rem; text-transform: uppercase; opacity: 0.5; letter-spacing: 1px; }
        .col-center { text-align: center; padding: 0 10px; display: flex; flex-direction: column; align-items: center; }
        .footer-heading { color: #fff; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; font-size: 1.3rem; font-weight: 600; }
        .about-text { line-height: 1.8; margin-bottom: 20px; max-width: 320px; }
        .social-group { display: flex; flex-direction: column; gap: 15px; align-items: center; margin-bottom: 10px; margin-top: 20px; }
        .social-link { display: inline-flex; align-items: center; gap: 10px; color: #fff; text-transform: uppercase; letter-spacing: 1px; font-size: 0.75rem; border: 1px solid #333; padding: 12px 25px; transition: 0.3s; }
        .social-link:hover { background: #fff; color: #000; }
        .whatsapp-icon-footer { font-size: 1.8rem; color: #888; transition: 0.3s; padding: 10px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; height: 43px; width: 50px; }
        .whatsapp-icon-footer:hover { color: #25D366; background: #fff; border-color: #fff; }
        .col-right { text-align: right; display: flex; flex-direction: column; align-items: flex-end; }
        .hours-box { border: 1px solid #333; padding: 25px; text-align: center; width: 100%; max-width: 300px; }
        .hours-box-title { display: block; text-transform: uppercase; font-size: 0.7rem; letter-spacing: 3px; color: #888; margin-bottom: 10px; }
        .mobile-address-inside { display: none; }
        .hours-wrapper { display: block; }
        .days-text { font-size: 0.9rem; color: #ccc; display: block; margin-bottom: 5px; }
        .time-text { font-size: 1.2rem; color: #fff; font-weight: 600; letter-spacing: 1px; display: block; }

        /* --- RESPONSIVE --- */
        @media (min-width: 768px) and (max-width: 1024px) {
            .grid-container { height: auto; min-height: 800px; }
            .grid-item { height: 400px; } 
            .grid-title { font-size: 1.5rem; }
            .pricing { padding: 60px 20px; }
            .hero-logo-img { width: 70%; }
            .crew-content-container { align-items: center; }
        }

        @media (max-width: 767px) {
            header { padding: 15px 20px; }
            .header-logo { height: 24px; }
            .hero-square-frame { width: 85vw; }
            .subtitle { font-size: 0.8rem; letter-spacing: 5px; margin-top: -20px; }
            
            /* Griglia Mobile: 1 colonna */
            .grid-container { height: auto; flex-direction: column; }
            .grid-item { 
                flex: 0 0 auto; 
                width: 100%; 
                height: 280px; 
                border-right: none; 
                border-bottom: 1px solid #1a1a1a; 
            }
            
            /* --- POSIZIONAMENTI IMG MOBILE AGGIORNATI --- */
            #bg-tagli { background-position: center center; } 
            #bg-salone { background-position: center 53%; } 
            #bg-map { background-position: center 60%; } 

            /* Footer Mobile */
            .footer-container { flex-direction: column; align-items: center; text-align: center; gap: 0; }
            .footer-col, .col-right { display: contents; }
            .footer-logo, .footer-address-link, .slogan, .copyright, .footer-heading, .about-text, .social-group, .hours-box {
                text-align: center; margin-left: auto; margin-right: auto; width: 100%; max-width: 300px;
            }
            .footer-address-link { display: none; } 
            .mobile-address-inside { 
                display: block; 
                color: #ccc; 
                margin-bottom: 15px; 
                font-size: 0.95rem; 
                line-height: 1.5;
                text-decoration: none; 
            }
            .mobile-address-inside:hover { text-decoration: underline; color: #fff; }

            .hours-wrapper { display: block; }
            .days-text { display: inline; font-size: 0.95rem; margin-right: 5px; }
            .time-text { display: inline; font-size: 0.95rem; font-weight: normal; }

            .footer-heading { order: 1; margin-bottom: 15px; }
            .about-text { order: 2; margin-bottom: 10px; }
            .slogan { order: 3; margin-bottom: 30px; }
            .social-group { order: 4; justify-content: center; margin-bottom: 40px; margin-top: 0; }
            .footer-logo { order: 5; margin-bottom: 20px; width: 100px; }
            .hours-box { order: 6; margin-bottom: 40px; }
            .copyright { order: 7; margin-top: 10px; padding-bottom: 30px; }

            .crew-content-container { flex-direction: column; align-items: center; padding-top: 140px; margin: 0; }
            .overlay-close-btn { top: 15px; right: 15px; background: rgba(0,0,0,0.8); }

            .gallery-container {
                display: flex; align-items: center; padding: 80px 0; overflow-x: auto;
                scroll-snap-type: x mandatory; width: 100%; max-width: unset; margin: 0;
            }
            .gallery-item { flex: 0 0 80%; max-width: 600px; height: 60vh; margin: 0 15px; scroll-snap-align: center; aspect-ratio: unset; }
            .gallery-spacer { display: block; flex: 0 0 10vw; }
            
            .map-wrapper { padding: 30px 20px; }
            .map-title { font-size: 2rem; }
        }
    </style>
</head>
<body class="preloader-active">

    <div id="preloader">
        <img src="logo.svg" alt="MIRA" class="preloader-logo">
        <div class="loading-bar-container">
            <div class="loading-bar-fill"></div>
        </div>
    </div>

    <header>
        <div class="header-left">
            <img src="logo.svg" alt="MIRA Logo" class="header-logo white-logo">
        </div>

        <div class="header-right">
            <div class="lang-switch">
                <span class="lang-btn active" onclick="setLanguage('it')">IT</span> |
                <span class="lang-btn" onclick="setLanguage('en')">EN</span> |
                <span class="lang-btn" onclick="setLanguage('es')">ES</span>
            </div>
            
            <a href="https://wa.me/393762061609" class="btn-prenota" data-i18n="bookBtn">Prenota</a>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <div class="hero-square-frame">
                <img src="logo.svg" alt="MIRA" class="hero-logo-img white-logo">
            </div>
            
            <p class="subtitle">Bari</p>
            <a href="https://www.google.com/maps/search/?api=1&query=Via+Giulio+Petroni+12+Bari" target="_blank" class="hero-address">Via Giulio Petroni 12</a>
            
            <a href="#servizi" class="scroll-down">
                <i class="fas fa-chevron-down" style="color: white;"></i>
            </a>
        </div>
    </section>

    <section class="pricing" id="servizi">
        <div class="pricing-container">
            <h2 class="section-title" data-i18n="servicesTitle">Servizi</h2>
            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv1_name">Taglio con Shampoo</span></div></div>
                <div class="service-desc" data-i18n="srv1_desc">Servizio di taglio compreso di shampoo prima e dopo, eseguito a macchinetta con styling incluso.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv2_name">Taglio Pettine e Forbici</span></div></div>
                <div class="service-desc" data-i18n="srv2_desc">Servizio di taglio compreso di shampoo e balsamo prima e dopo, eseguito a forbici con rifinitura a rasoio e finish styling incluso.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv3_name">Taglio Bambino</span></div></div>
                <div class="service-desc" data-i18n="srv3_desc">Servizio di taglio compreso di shampoo riservato a ragazzi 0 - 15 anni.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv4_name">Barba / Rasatura Tradizionale</span></div></div>
                <div class="service-desc" data-i18n="srv4_desc">Servizio di rasatura barba comprensivo di: crema "pre-barba", panno caldo pre rasatura e panno freddo post rasatura.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv5_name">Barba Lunga</span></div></div>
                <div class="service-desc" data-i18n="srv5_desc">Servizio che include: detersione barba, panno caldo, asciugatura, modellatura, rasatura e panno freddo post rasatura.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv6_name">Ritual Barba</span></div></div>
                <div class="service-desc" data-i18n="srv6_desc">Servizio che include: detersione barba, panno caldo pre rasatura e panno freddo post rasatura.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv7_name">Air Oiling / Anti Caduta</span></div></div>
                <div class="service-desc" data-i18n="srv7_desc">Trattamento agli olii essenziali per cura della cute.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv8_name">Trattamento Purificante</span></div></div>
                <div class="service-desc" data-i18n="srv8_desc">Trattamento scrub cute + lozione.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv9_name">Trattamento Viso</span></div></div>
                <div class="service-desc" data-i18n="srv9_desc">Trattamento specifico che comprende: detersione, panno caldo, applicazione maschera, applicazione siero e crema.</div>
            </div>

            <div class="service-item" onclick="toggleService(this)">
                <div class="service-header"><div class="service-name"><i class="fas fa-chevron-right toggle-icon"></i> <span data-i18n="srv10_name">Sopracciglia</span></div></div>
                <div class="service-desc" data-i18n="srv10_desc">Trattamento estetico di pulizia della forma con pinzetta.</div>
            </div>
        </div>
    </section>

    <section class="visual-section">
        <div class="grid-container">
            
            <div class="grid-item" onclick="openOverlay('galleryOverlay')">
                <div class="grid-bg" id="bg-salone" style="background-image: url('img-salone.jpg');"></div>
                <div class="grid-content">
                    <h3 class="grid-title" data-i18n="grid_gallery">Gallery</h3>
                    <span class="grid-subtitle" data-i18n="grid_gallery_sub">Il Salone</span>
                </div>
            </div>

            <div class="grid-item" onclick="openOverlay('portfolioOverlay')">
                <div class="grid-bg" id="bg-tagli" style="background-image: url('img-tagli.jpg');"></div>
                <div class="grid-content">
                    <h3 class="grid-title" data-i18n="grid_portfolio">Portfolio</h3>
                    <span class="grid-subtitle" data-i18n="grid_portfolio_sub">I Nostri Tagli</span>
                </div>
            </div>

            <div class="grid-item" onclick="openOverlay('crewOverlay')">
                <div class="grid-bg" style="background-image: url('img-crew.jpg');"></div>
                <div class="grid-content">
                    <h3 class="grid-title" data-i18n="grid_crew">The Crew</h3>
                    <span class="grid-subtitle" data-i18n="grid_crew_sub">I Nostri Barbieri</span>
                </div>
            </div>

            <div class="grid-item" onclick="openOverlay('mapOverlay')">
                <div class="grid-bg" id="bg-map" style="background-image: url('img-map.jpg');"></div>
                <div class="grid-content">
                    <h3 class="grid-title" data-i18n="grid_location">Location</h3>
                    <span class="grid-subtitle" data-i18n="grid_location_sub">Dove ci troviamo</span>
                </div>
            </div>

        </div>
    </section>

    <div id="galleryOverlay" class="overlay">
        <a href="javascript:void(0)" class="overlay-close-btn" onclick="closeOverlay('galleryOverlay')">×</a>
        <div class="gallery-container">
            <div class="gallery-spacer"></div>
            <div class="gallery-item"><img src="salone1.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone2.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone3.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone4.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone5.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone6.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone7.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone8.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone9.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone10.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone11.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone12.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone13.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone14.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone15.jpg" class="zoomable"></div>
            <div class="gallery-item"><img src="salone16.jpg" class="zoomable"></div>
            <div class="gallery-spacer"></div>
        </div>
    </div>

    <div id="lightbox" class="lightbox">
        <span class="lightbox-close" onclick="closeLightbox()">×</span>
        <div class="lightbox-nav prev-btn" onclick="changeImage(-1)">❮</div>
        <img id="lightbox-img" class="lightbox-img" src="">
        <div class="lightbox-nav next-btn" onclick="changeImage(1)">❯</div>
    </div>

    <div id="portfolioOverlay" class="overlay">
        <a href="javascript:void(0)" class="overlay-close-btn" onclick="closeOverlay('portfolioOverlay')">×</a>
        <div class="portfolio-grid">
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio1.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio2.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio3.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio4.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio5.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio6.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio7.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio8.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio9.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio10.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio11.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio12.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio13.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio14.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><video class="portfolio-media" controls playsinline preload="metadata"><source src="taglio15.mp4" type="video/mp4"></video></div>
            <div class="portfolio-item"><img src="taglio-foto1.jpg" class="portfolio-media zoomable"></div>
            <div class="portfolio-item"><img src="taglio-foto2.jpg" class="portfolio-media zoomable"></div>
        </div>
    </div>

    <div id="crewOverlay" class="overlay">
        <a href="javascript:void(0)" class="overlay-close-btn" onclick="closeOverlay('crewOverlay')">×</a>
        <div class="crew-content-container">
            <div class="crew-card">
                <div class="img-placeholder"><img src="fabio.jpg" alt="Fabio" class="crew-photo"></div>
                <div class="crew-info"><h3 class="crew-name">Fabio</h3><p class="crew-role">Master Barber</p></div>
            </div>
            <div class="crew-card">
                <div class="img-placeholder"><img src="giusy.jpg" alt="Giusy" class="crew-photo"></div>
                <div class="crew-info"><h3 class="crew-name">Giusy</h3><p class="crew-role">Senior Stylist</p></div>
            </div>
        </div>
    </div>

    <div id="mapOverlay" class="overlay">
        <a href="javascript:void(0)" class="overlay-close-btn" onclick="closeOverlay('mapOverlay')">×</a>
        <div class="map-content-container">
            <div class="map-wrapper">
                <h3 class="map-title" data-i18n="map_title">Dove Siamo</h3>
                <p class="map-desc" data-i18n="map_desc">
                    Situato nel cuore pulsante di Bari, a pochi passi dalla Stazione Centrale e dal Policlinico, MIRA è facilmente raggiungibile sia dal centro che dai quartieri Picone e Carrassi. Un angolo di stile urbano perfettamente collegato.
                </p>
                
                <div class="map-buttons">
                    <a href="https://www.google.com/maps/search/?api=1&query=MIRA+Mens+Cut+Bari" target="_blank" class="map-btn">
                        <i class="fab fa-google"></i> Google Maps
                    </a>
                    <a href="https://waze.com/ul?q=MIRA+Mens+Cut+Bari" target="_blank" class="map-btn">
                        <i class="fab fa-waze"></i> Waze
                    </a>
                </div>

                <div class="parking-box">
                    <span class="parking-title" data-i18n="parking_title">Convenzione Parcheggio</span>
                    <p class="parking-desc" data-i18n="parking_desc">Per garantirti il massimo comfort, abbiamo una convenzione esclusiva con un garage nelle vicinanze.</p>
                    <a href="https://maps.app.goo.gl/Z9gMgVC3qV6opbwG6" target="_blank" class="map-btn" style="border-color: #999; color: #ccc;">
                        <i class="fas fa-parking"></i> <span data-i18n="garage_btn">Vedi Garage</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-col">
                <img src="logo.svg" alt="MIRA Logo" class="footer-logo white-logo">
                <a href="https://www.google.com/maps/search/?api=1&query=Via+Giulio+Petroni+12+Bari" target="_blank" class="footer-address-link">
                    Via Giulio Petroni 12<br>70124 Bari, Italia
                </a>
                <div class="copyright">
                    © 2025 MIRA Men's Cut.<br>All Rights Reserved.<br>
                    <a href="legal.html" style="text-decoration: underline; color: #666; margin-top: 5px; display: inline-block;">Privacy & Termini</a>
                </div>
            </div>
            
            <div class="footer-col col-center">
                <h4 class="footer-heading" data-i18n="footer_about_title">About Mira</h4>
                <p class="about-text" data-i18n="footer_about_text">
                    Un ambiente esclusivo dove la tradizione della barberia incontra l'estetica contemporanea. Precisione, cura e dettaglio.
                </p>
                <p class="slogan" data-i18n="slogan">"Definire lo stile,<br>un taglio alla volta."</p>
                <div class="social-group">
                    <a href="https://www.instagram.com/miramenscut/" target="_blank" class="social-link">
                        <i class="fab fa-instagram"></i> <span data-i18n="follow_ig">Seguici su Instagram</span>
                    </a>
                    <a href="https://wa.me/393762061609?text=Ciao,%20vorrei%20prenotare%20un%20appuntamento%20presso%20MIRA." class="whatsapp-icon-footer">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-col col-right">
                <div class="hours-box">
                    <span class="hours-box-title" data-i18n="opening_hours">Orari di Apertura</span>
                    
                    <a href="https://www.google.com/maps/search/?api=1&query=Via+Giulio+Petroni+12+Bari" target="_blank" class="mobile-address-inside">
                        Via Giulio Petroni 12<br>70124 Bari, Italia
                    </a>

                    <div class="hours-wrapper">
                        <span class="days-text" data-i18n="days">Mar - Sab</span>
                        <span class="time-text">9:00 - 20:00</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- TRANSLATION LOGIC ---
        const translations = {
            it: {
                bookBtn: "Prenota",
                servicesTitle: "Servizi",
                srv1_name: "Taglio con Shampoo", srv1_desc: "Servizio di taglio compreso di shampoo prima e dopo, eseguito a macchinetta con styling incluso.",
                srv2_name: "Taglio Pettine e Forbici", srv2_desc: "Servizio di taglio compreso di shampoo e balsamo prima e dopo, eseguito a forbici con rifinitura a rasoio e finish styling incluso.",
                srv3_name: "Taglio Bambino", srv3_desc: "Servizio di taglio compreso di shampoo riservato a ragazzi 0 - 15 anni.",
                srv4_name: "Barba / Rasatura Tradizionale", srv4_desc: "Servizio di rasatura barba comprensivo di: crema \"pre-barba\", panno caldo pre rasatura e panno freddo post rasatura.",
                srv5_name: "Barba Lunga", srv5_desc: "Servizio che include: detersione barba, panno caldo, asciugatura, modellatura, rasatura e panno freddo post rasatura.",
                srv6_name: "Ritual Barba", srv6_desc: "Servizio che include: detersione barba, panno caldo pre rasatura e panno freddo post rasatura.",
                srv7_name: "Air Oiling / Anti Caduta", srv7_desc: "Trattamento agli olii essenziali per cura della cute.",
                srv8_name: "Trattamento Purificante", srv8_desc: "Trattamento scrub cute + lozione.",
                srv9_name: "Trattamento Viso", srv9_desc: "Trattamento specifico che comprende: detersione, panno caldo, applicazione maschera, applicazione siero e crema.",
                srv10_name: "Sopracciglia", srv10_desc: "Trattamento estetico di pulizia della forma con pinzetta.",
                
                grid_gallery: "Gallery", grid_gallery_sub: "Il Salone",
                grid_portfolio: "Portfolio", grid_portfolio_sub: "I Nostri Tagli",
                grid_crew: "The Crew", grid_crew_sub: "I Nostri Barbieri",
                grid_location: "Location", grid_location_sub: "Dove ci troviamo",

                map_title: "Dove Siamo",
                map_desc: "Situato nel cuore pulsante di Bari, a pochi passi dalla Stazione Centrale e dal Policlinico, MIRA è facilmente raggiungibile sia dal centro che dai quartieri Picone e Carrassi. Un angolo di stile urbano perfettamente collegato.",
                parking_title: "Convenzione Parcheggio",
                parking_desc: "Per garantirti il massimo comfort, abbiamo una convenzione esclusiva con un garage nelle vicinanze.",
                garage_btn: "Vedi Garage",

                footer_about_title: "About Mira",
                footer_about_text: "Un ambiente esclusivo dove la tradizione della barberia incontra l'estetica contemporanea. Precisione, cura e dettaglio.",
                slogan: "\"Definire lo stile,<br>un taglio alla volta.\"",
                follow_ig: "Seguici su Instagram",
                opening_hours: "Orari di Apertura",
                days: "Mar - Sab"
            },
            en: {
                bookBtn: "Book Now",
                servicesTitle: "Services",
                srv1_name: "Haircut & Shampoo", srv1_desc: "Haircut service including shampoo before and after, performed with clippers, styling included.",
                srv2_name: "Scissor Cut", srv2_desc: "Haircut service including shampoo and conditioner, performed with scissors, razor finishing, and styling included.",
                srv3_name: "Kids Cut", srv3_desc: "Haircut service including shampoo reserved for ages 0 - 15.",
                srv4_name: "Beard / Traditional Shave", srv4_desc: "Shaving service including pre-shave cream, hot towel, and cold towel post-shave.",
                srv5_name: "Long Beard Trim", srv5_desc: "Service including beard cleansing, hot towel, drying, shaping, shaving, and cold towel post-shave.",
                srv6_name: "Beard Ritual", srv6_desc: "Premium service including deep cleansing, hot towel pre-shave, and cold towel post-shave.",
                srv7_name: "Air Oiling / Anti-Hair Loss", srv7_desc: "Essential oil treatment for scalp care.",
                srv8_name: "Purifying Treatment", srv8_desc: "Scalp scrub treatment + lotion.",
                srv9_name: "Facial Treatment", srv9_desc: "Specific treatment including cleansing, hot towel, mask application, serum, and cream.",
                srv10_name: "Eyebrows", srv10_desc: "Aesthetic shaping and cleaning with tweezers.",

                grid_gallery: "Gallery", grid_gallery_sub: "The Salon",
                grid_portfolio: "Portfolio", grid_portfolio_sub: "Our Cuts",
                grid_crew: "The Crew", grid_crew_sub: "Our Barbers",
                grid_location: "Location", grid_location_sub: "Where to find us",

                map_title: "Where We Are",
                map_desc: "Located in the beating heart of Bari, just steps from the Central Station and the Policlinico, MIRA is easily accessible from the city center, Picone, and Carrassi districts. An urban style corner perfectly connected.",
                parking_title: "Parking Agreement",
                parking_desc: "To ensure maximum comfort, we have an exclusive agreement with a nearby garage.",
                garage_btn: "View Garage",

                footer_about_title: "About Mira",
                footer_about_text: "An exclusive environment where traditional barbering meets contemporary aesthetics. Precision, care, and detail.",
                slogan: "\"Defining style,<br>one cut at a time.\"",
                follow_ig: "Follow on Instagram",
                opening_hours: "Opening Hours",
                days: "Tue - Sat"
            },
            es: {
                bookBtn: "Reservar",
                servicesTitle: "Servicios",
                srv1_name: "Corte con Champú", srv1_desc: "Servicio de corte con champú antes y después, realizado con máquina, peinado incluido.",
                srv2_name: "Corte a Tijera", srv2_desc: "Servicio de corte con champú y acondicionador, realizado a tijera con acabado a navaja y peinado incluido.",
                srv3_name: "Corte Niño", srv3_desc: "Servicio de corte con champú reservado para edades 0 - 15.",
                srv4_name: "Barba / Afeitado Tradicional", srv4_desc: "Servicio de afeitado que incluye crema pre-afeitado, toalla caliente y toalla fría post-afeitado.",
                srv5_name: "Barba Larga", srv5_desc: "Servicio que incluye limpieza de barba, toalla caliente, secado, modelado, afeitado y toalla fría.",
                srv6_name: "Ritual Barba", srv6_desc: "Servicio premium que incluye limpieza profunda, toalla caliente pre-afeitado y toalla fría post-afeitado.",
                srv7_name: "Air Oiling / Anti-Caída", srv7_desc: "Tratamiento con aceites esenciales para el cuidado del cuero cabelludo.",
                srv8_name: "Tratamiento Purificante", srv8_desc: "Tratamiento exfoliante del cuero cabelludo + loción.",
                srv9_name: "Tratamiento Facial", srv9_desc: "Tratamiento específico que incluye limpieza, toalla caliente, mascarilla, suero y crema.",
                srv10_name: "Cejas", srv10_desc: "Limpieza y perfilado estético con pinzas.",

                grid_gallery: "Galería", grid_gallery_sub: "El Salón",
                grid_portfolio: "Portafolio", grid_portfolio_sub: "Nuestros Cortes",
                grid_crew: "El Equipo", grid_crew_sub: "Nuestros Barberos",
                grid_location: "Ubicación", grid_location_sub: "Dónde estamos",

                map_title: "Dónde Estamos",
                map_desc: "Situado en el corazón de Bari, a pocos pasos de la Estación Central y del Policlínico, MIRA es fácilmente accesible desde el centro, Picone y Carrassi. Un rincón de estilo urbano perfectamente conectado.",
                parking_title: "Convenio Parking",
                parking_desc: "Para garantizar el máximo confort, tenemos un convenio exclusivo con un garaje cercano.",
                garage_btn: "Ver Garaje",

                footer_about_title: "Sobre Mira",
                footer_about_text: "Un ambiente exclusivo dove la barbería tradicional se encuentra con la estética contemporánea. Precisión, cuidado y detalle.",
                slogan: "\"Definiendo el estilo,<br>un corte a la vez.\"",
                follow_ig: "Síguenos en Instagram",
                opening_hours: "Horarios",
                days: "Mar - Sáb"
            }
        };

        function setLanguage(lang) {
            localStorage.setItem('mira_lang', lang);
            
            // Update Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText.toLowerCase() === lang) btn.classList.add('active');
            });

            // Update Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });
        }

        function toggleService(element) {
            const allItems = document.querySelectorAll('.service-item');
            if (element.classList.contains('active')) {
                element.classList.remove('active');
                return;
            }
            allItems.forEach(item => { item.classList.remove('active'); });
            element.classList.add('active');
        }

        function openOverlay(id) {
            document.getElementById(id).classList.add("open");
            document.body.style.overflow = "hidden"; 
        }

        function closeOverlay(id) {
            document.getElementById(id).classList.remove("open");
            document.body.style.overflow = "auto"; 
            const allVideos = document.querySelectorAll('video');
            allVideos.forEach(vid => vid.pause());
        }

        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            preloader.classList.add('hide-preloader');
            document.body.classList.remove('preloader-active');
            
            // Load saved language or default to IT
            const savedLang = localStorage.getItem('mira_lang') || 'it';
            setLanguage(savedLang);
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('img').forEach(img => {
                img.onerror = function() {
                    this.classList.add('broken');
                    if (this.src.endsWith('.jpg')) {
                        this.src = this.src.replace('.jpg', '.JPG');
                        this.onerror = function() {
                             let container = this.closest('.gallery-item, .portfolio-item, .crew-card, .grid-item');
                             if(container) container.style.display = 'none';
                        }
                    } else {
                        let container = this.closest('.gallery-item, .portfolio-item, .crew-card, .grid-item');
                        if(container) container.style.display = 'none';
                    }
                };
            });

            document.querySelectorAll('source').forEach(source => {
                source.onerror = function() {
                    let container = this.closest('.portfolio-item');
                    if(container) container.style.display = 'none';
                };
            });

            document.querySelectorAll('.overlay').forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeOverlay(this.id);
                    }
                });
            });

            const videos = document.querySelectorAll('video');
            videos.forEach(video => {
                video.addEventListener('play', (event) => {
                    videos.forEach(otherVideo => {
                        if (otherVideo !== video) {
                            otherVideo.pause();
                        }
                    });
                });
            });

            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            let currentGallery = []; 
            let currentIndex = 0;

            const allZoomableImages = document.querySelectorAll('.zoomable');

            allZoomableImages.forEach(img => {
                img.onclick = (e) => {
                    if(img.classList.contains('broken') || img.style.display === 'none') return;

                    const container = img.closest('.gallery-container, .portfolio-grid');
                    currentGallery = Array.from(container.querySelectorAll('.zoomable:not(.broken)'));
                    
                    currentIndex = currentGallery.indexOf(img);
                    if(currentIndex !== -1) {
                        openLightbox();
                    }
                    e.stopPropagation(); 
                }
            });

            window.openLightbox = function() {
                updateLightboxImage();
                lightbox.classList.add('active');
            }

            window.closeLightbox = function() {
                lightbox.classList.remove('active');
            }
            
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            window.changeImage = function(direction) {
                currentIndex += direction;
                if (currentIndex >= currentGallery.length) currentIndex = 0;
                if (currentIndex < 0) currentIndex = currentGallery.length - 1;
                updateLightboxImage();
            }

            function updateLightboxImage() {
                if(currentGallery.length > 0) {
                    lightboxImg.src = currentGallery[currentIndex].src;
                }
            }

            let touchStartX = 0;
            let touchEndX = 0;

            lightbox.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });

            lightbox.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });

            function handleSwipe() {
                if (touchEndX < touchStartX - 50) changeImage(1); 
                if (touchEndX > touchStartX + 50) changeImage(-1);
            }
        });
    </script>

</body>
</html>